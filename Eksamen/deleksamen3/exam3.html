<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam </title>
    <link href="exam3.css" rel="stylesheet" media="all">
</head>
<body>
    <main>
        <h1>Fargepaletten</h1>
        <canvas id="colorspace"></canvas>
        <nav>
            <button id="addColor">Legg till en farge</button>
            <button id="emptyArray">Tilbakestill fargene</button>
            <button id="generateAll">Generer 10 nye farger</button>
        </nav>
        <h2>Endre farger:</h2>
        <section>
            <p>Bytt ut fargen i rute <select id="colorSquareIndex">
                <option value="0" >1</option>
                <option value="1">2</option>
                <option value="2">3</option>
                <option value="3">4</option>
                <option value="4">5</option>
                <option value="5">6</option>
                <option value="6">7</option>
                <option value="7">8</option>
                <option value="8">9</option>
                <option value="9">10</option>
            </select> med #<input type="text" id="newColor" /> <button id="saveNewColor">Lagre ny farge</button></p>
        </section>
    </main>
    

    <script>
        //Configure canvas
        const canvas = document.getElementById("colorspace")
        canvas.width = 1000
        canvas.height = 100
        const ctx = canvas.getContext("2d")

        /* --- YOUR FUNCTIONALITY AND CODE GOES HERE --- */
        
       

        //Variabler for knappene:
        const addColorbtn = document.getElementById("addColor")
        const emptyArraybtn = document.getElementById("emptyArray")
        const generateAllbtn = document.getElementById("generateAll")
        const saveNewColorbtn = document.getElementById("saveNewColor")
        const inputColor = document.getElementById("saveNewColor")
        
        //Variabler for minste og største verdien 
        const min = 0
        const maxNum = 9
        const maxLet = 5

        //Midlertidige varibaler for enklere kode
        let ranNumb = ""
        let ranNumbLet = ""
        let ranLet = ""

        //Variabel for lagring av resultater:
            let listColor = "#"

        //Arrayen der alt skal ligge 
        let colorArray = [] 
  
        //Alle knappene
        addColorbtn.addEventListener("click", () => { //Se dokument linje 69-72 for kilde
            randomColor()
            //console.log(colorArray) 
        })

        emptyArraybtn.addEventListener("click", () => { 
            clearAll()
            addColorbtn.disabled = false
        })
        generateAllbtn.addEventListener("click", () => {
            console.log("10 knapp funker")
            tenColors()
        
        })
        inputColor.addEventListener("click", () =>{
            changeOneColor()
        })

        function randomColor(){
            //Den skrur av knappen når arrayen er full
            if(colorArray.length >= 9){ //Se dokument linje 77. If test for å skru av knapp
            addColorbtn.disabled = true
            console.log("det var nok farger kompis") //vurderer å flytte på den her
            }

            //For å finne tilfeldig tall
            ranNumb = Math.floor(Math.random() * ((maxNum - min + 1)+ min))
            

            //For å finne tilfeldig tall
            ranNumbLet = Math.floor(Math.random() * ((maxLet - min + 1)+ min))
            //For å finne en tilfeldig bokstav 
            if(ranNumbLet === 0){
                ranLet = "a"
            } else if(ranNumbLet === 1){
                ranLet = "b"
            } else if(ranNumbLet === 2){
                ranLet = "c"
            } else if(ranNumbLet === 3){
                ranLet = "d"
            } else if(ranNumbLet === 4){
                ranLet = "e"
            } else if(ranNumbLet === 5){
                ranLet = "f"
            }

             //Tilfeldig plassering av tall og bokstaver som går flere 6 runder 
            for(let teller = 1; teller <= 6; teller++) {        
                const randomplace = Math.random()
                if(randomplace > 0.5){
                    listColor += ranLet 
                } else{
                    listColor += ranNumb
                }
            }
            colorArray.push(listColor)
            listColor = "#" //For å fjerne det koden lagde forrige runde
            drawRandomColor()
        }

            //Variabler som forandrer seg 
            let indexVar = ""
            let colorX = ""
            let number = ""
            let theColor = ""

            //test 
            let color1 = false
            let color2 = false
            let color3 = false 
            let color4 = false 
            let color5 = false 
            let color6 = false
            let color7 = false 
            let color8 = false
            let color9 = false 
            let color10 = false 


        function drawRandomColor(){
            //If test for å få rikitg verdier til variabelene 
           if(colorArray.length === 1){
                indexVar = 0
                colorX = 0
                number = 1
                theColor = colorArray[indexVar]
                color1 = true
            
            } else if(colorArray.length === 2){
                indexVar = 1
                colorX = 100
                number = 2
                theColor = colorArray[indexVar]
                color2 = true 
            } else if(colorArray.length === 3){
                indexVar = 2
                colorX = 200
                number = 3
                theColor = colorArray[indexVar]
                color3 = true
            }else if(colorArray.length === 4){
                indexVar = 3
                colorX = 300
                number = 4
                theColor = colorArray[indexVar]
                color4 = true 
            }else if(colorArray.length === 5){
                indexVar = 4
                colorX = 400
                number = 5
                theColor = colorArray[indexVar]
                color5 = true
            }else if(colorArray.length === 6){
                indexVar = 5
                colorX = 500
                number = 6
                theColor = colorArray[indexVar]
                color6 = true 
            }else if(colorArray.length === 7){
                indexVar = 6
                colorX = 600
                number = 7
                theColor = colorArray[indexVar]
                color7 = true
            }else if(colorArray.length === 8){
                indexVar = 7
                colorX = 700
                number = 8
                theColor = colorArray[indexVar]
                color8 = true 
            }else if(colorArray.length === 9){
                indexVar = 8
                colorX = 800
                number = 9
                theColor = colorArray[indexVar]
                color9 = true
            }else if(colorArray.length === 10){
                indexVar = 9
                colorX = 900
                number = 10
                theColor = colorArray[indexVar]
                color10 = true 
            }

            draw()
        } 
        function draw(){
            //Firkant 
            ctx.beginPath()
            ctx.rect(colorX, 0 , 100, 100) //ha noe på koordinatene så den kan tegne ut bortover
            ctx.fillStyle = theColor//Her skal fargekoden komme 
            ctx.fill()
            ctx.closePath() 

            //Nummerboks 
            ctx.beginPath()
            ctx.rect(colorX + 79, 80, 21, 20)
            ctx.fillStyle = "white"
            ctx.fill()
            ctx.font = "18px Arial"
            ctx.fillStyle = theColor
            ctx.fillText(number, colorX + 80, 95) //forandre så det står etter riktig tall
            ctx.closePath()

            //Fargekodeboks
            ctx.beginPath()
            ctx.rect(colorX, 0, 70, 20)
            ctx.fillStyle = "white"
            ctx.fill()
            ctx.font = "14px Arial"
            ctx.fillStyle = "#000000"
            ctx.fillText( theColor, colorX + 5, 15)
            ctx.closePath()
        }   
        
        function clearAll(){
            colorArray = []
            ctx.clearRect(0, 0, 1000, 100)
            inputThere = false
            codeRight = false 
            codeLenght = false  
            colorThere = false
        }
        function tenColors(){
            ctx.clearRect(0, 0, 1000, 100)
            colorArray = []
            for(let teller = 1; teller <= 10; teller++){
                randomColor()
                console.log(colorArray)
            }
        }
        let userTest = document.getElementById("newColor")
        let optionTest = document.getElementById("colorSquareIndex")
        let optionValue = ""
        let userValue = ""
        let placeNumber = ""
        
        //Variabler for kravene for at brukeren skal få lov til å tegne
        let inputThere = false 
        let colorThere = false
        let codeRight = false 
        let codeLenght = false 
        
        function changeOneColor(){   
            optionValue = optionTest.value //for hvilken firkant brukeren velger
            userValue = `#${userTest.value}` //for inputen til brukeren 
           
            let color1Stat = true 
            let color2Stat = true 
            let color3Stat = true 
            let color4Stat = true 
            let color5Stat = true 
            let color6Stat = true 
            let color7Stat = true 
            let color8Stat = true 
            let color9Stat = true 
            let color10Stat = true 
            
            //colorArray.length === 0
            if(optionValue == 0 && color1 === false){
                //alert("Du har valgt firkant 1. Denne har ikke en farge enda, og kan derfor ikke byttes. Du har ikke lagt til noen farger og kan derfor ikke endre på noen av dem")
                placeNumber = 1 
                alertFunc()
                color1Stat = false
            } 
            if(optionValue == 1 && color2 === false ){
                //alert(`Du har valgt firkant 2. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant Y til ${colorArray.length}`)
                placeNumber = 2
                alertFunc()
                color2Stat = false 
            } 
             if(optionValue == 2 && color3 === false ){
                placeNumber = 3
                alertFunc()
                color3Stat = false 
            } 
            if(optionValue == 3 && color4 === false){
                placeNumber = 4
                alertFunc()
                color4Stat = false 
            } 
            if(optionValue == 4 && color5 === false){
                placeNumber = 5
                alertFunc()
                color5Stat = false 
            } 
             if(optionValue == 5 && color6 === false){
                placeNumber = 6
                alertFunc()
                color6Stat = false 
            } 
            if(optionValue == 6 && color7 === false){
                placeNumber = 7
                alertFunc()
                color7Stat = false 
            } 
            if(optionValue == 7 && color8 === false){
                placeNumber = 8
                alertFunc()
                color8Stat = false 
            } 
            if(optionValue == 8 && color9 === false){
                placeNumber = 9
                alertFunc()
                color9Stat = false 
            } 
            if(optionValue == 9 && color10 === false){
                placeNumber = 10
                alertFunc()
                color10Stat = false 
            } 

            
            
        if(color1Stat === true && color2Stat === true && color3Stat === true && color4Stat === true && color5Stat === true && color6Stat === true && color7Stat === true && color8Stat === true && color9Stat === true && color10Stat === true ){
            colorThere = true 
        }
           
            
        if(userValue === "#"){ //når brukeren ikke har skrevet noe 
                alert("Du har ikke skrevet noen fargekode enda")
            } else{
                inputThere = true
            }

        //Variabeler for å sjekke hver bokstav. Se for kilde i dokument Linje 300
        let firstLet = userValue.charAt(1)   
            let secLet = userValue.charAt(2)
            let thridLet = userValue.charAt(3)
            let fourthLet = userValue.charAt(4)
            let fithLet = userValue.charAt(5)
            let sixLet = userValue.charAt(6)

            //Boolean variabler som må være aktivert for at koden skal funke. 
            let firstLetStat = false 
            let secLetStat = false 
            let thridLetStat = false 
            let fourthLetStat = false 
            let fithLetStat = false 
            let sixLetStat = false 
            
            //Test for å se om hver plass inneholder rikitig karakterer
            if(firstLet == "a" || firstLet == "b" || firstLet == "c" || firstLet == "d" || firstLet == "e" || firstLet == "f" || firstLet == "0" || firstLet == "1" || firstLet == "2" || firstLet == "3" || firstLet == "4" || firstLet == "5" || firstLet == "6" || firstLet == "7" || firstLet == "8" ||  firstLet == "9"){
                firstLetStat = true 
            }
            if(secLet == "a" || secLet == "b" || secLet == "c" || secLet == "d" || secLet == "e" || secLet == "f" || secLet == "0" || secLet == "1" || secLet == "2" || secLet == "3" || secLet == "4" || secLet == "5" || secLet == "6" || secLet == "7" || secLet == "8" ||  secLet == "9"){
                secLetStat = true
            }
            if(thridLet == "a" || thridLet == "b" || thridLet == "c" || thridLet == "d" || thridLet== "e" || thridLet == "f" || thridLet== "0" || thridLet == "1" || thridLet== "2" || thridLet == "3" || thridLet == "4" || thridLet == "5" || thridLet == "6" || thridLet == "7" || thridLet == "8" || thridLet == "9"){
                thridLetStat = true
            }
            if(fourthLet == "a" || fourthLet== "b" || fourthLet == "c" || fourthLet == "d" || fourthLet == "e" || fourthLet == "f" || fourthLet == "0" || fourthLet == "1" || fourthLet == "2" || fourthLet == "3" || fourthLet == "4" || fourthLet == "5" || fourthLet == "6" || fourthLet == "7" || fourthLet == "8" || fourthLet == "9"){
                fourthLetStat = true
            }
            if(fithLet == "a" || fithLet == "b" || fithLet == "c" || fithLet == "d" || fithLet == "e" || fithLet == "f" || fithLet == "0" || fithLet == "1" || fithLet == "2" || fithLet == "3" || fithLet == "4" || fithLet == "5" || fithLet == "6" || fithLet == "7" || tfithLet == "8" || fithLet== "9"){
                fithLetStat = true
            }
            if(sixLet  == "a" || sixLet  == "b" || sixLet == "c" || sixLet == "d" || sixLet == "e" || sixLet  == "f" || sixLet == "0" || sixLet  == "1" || sixLet  == "2" || sixLet == "3" || sixLet  == "4" || sixLet  == "5" || sixLet  == "6" || sixLet == "7" || sixLet  == "8" || sixLet  == "9"){
                sixLetStat = true
            }

            if(firstLetStat === true && secLetStat === true && thridLetStat === true && fourthLetStat === true && fithLetStat === true && sixLetStat === true){
                codeRight = true
            } else{
                alert(`«Du har skrevet ${userValue}. Dette er ikke en gyldig fargekode.»`)
            }

        let valueLength = userValue.length //variabel for å se på lengden
        console.log(userValue)
        //se om hvert sted har en av bokstavene og trykk ned en knapp?
        
    
        if(valueLength === 7){ 
            codeLenght = true 
        } else{
            alert(`«Du har skrevet ${userValue}. Dette er ikke en gyldig fargekode.»`)
        }
 

            console.log(valueLength)     
            /*console.log("color " + colorThere)
            console.log("there " + inputThere)*/

        
            if(inputThere === true && codeRight === true && codeLenght === true && colorThere === true){ //Test som ser om alle kravene er fullført. 
                console.log("tegningen kjører")
                drawingNewColor()
                /*inputThere = false
                console.log("color " + colorThere)
                console.log("there " + inputThere)*/
            } 
     
            function drawingNewColor(){
                if(optionValue == 0){ 
                colorX = 0
                number = 1
                theColor = userValue
                colorArray[0] = userValue
            } else if(optionValue == 1){
                colorX = 100
                number = 2
                theColor = userValue
                colorArray[1] = userValue
            }
            else if(optionValue == 2){
                colorX = 200
                number = 3
                theColor = userValue
                colorArray[2] = userValue
            }
            else if(optionValue == 3){
                colorX = 300
                number = 4
                theColor = userValue
                colorArray[3] = userValue
            }
            else if(optionValue == 4){
                colorX = 400
                number = 5
                theColor = userValue
                colorArray[4] = userValue
            }
            else if(optionValue == 5){
                colorX = 500
                number = 6
                theColor = userValue
                colorArray[5] = userValue
            }
            else if(optionValue == 6){
                colorX = 600
                number = 7
                theColor = userValue
                colorArray[6] = userValue
            }
            else if(optionValue == 7){
                colorX = 700
                number = 8
                theColor = userValue
                colorArray[7] = userValue
            }
            else if(optionValue == 8){
                colorX = 800
                number = 9
                theColor = userValue
                colorArray[8] = userValue
            }
            else if(optionValue == 9){
                colorX = 900
                number = 10
                theColor = userValue
                colorArray[9] = userValue
            }

            ctx.clearRect(colorX, 0, 100, 100) //Fjerner rikitg firkant for å kunne tegne ny
            draw() //Setter i gang tegningen av ny firkant
           }
        }

        
       
        function alertFunc(){
            console.log("funksjonen kjører")
            console.log(colorArray.length)
            if(colorArray.length == 0){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du har ikke lagt til noen farger og kan derfor ikke endre på noen av dem`)
            }
            if(colorArray.length == 2){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant 1 til 2`)
            }
            if(colorArray.length == 3){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant 1 til 3`)
            }
            if(colorArray.length == 4){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant 1 til 4`)
            }
            if(colorArray.length == 5){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant 1 til 5`)
            }
            if(colorArray.length == 6){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant 1 til 6`)
            }
            if(colorArray.length == 7){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant 1 til 7`)
            }
            if(colorArray.length == 8){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant 1 til 8`)
            }
            if(colorArray.length == 9){
                alert(`Du har valgt firkant ${placeNumber}. Denne har ikke en farge enda, og kan derfor ikke byttes. Du kan endre farge på firkant 1 til 9`)
            }
            
            }
               
        
        //requestAnimationFrame
        const requestAnimationFrame = window.requestAnimationFrame || window.msRequestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame
        function renderCanvas() {
            requestAnimationFrame(renderCanvas)
        }

     
        //Initial running of drawing canvas
        renderCanvas()
    </script>
</body>
</html>